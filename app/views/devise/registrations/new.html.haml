.devise__layout
  .devise__left.overflow-hidden.overflow-y-auto
    .devise__container
      .devise__header
        %h2.devise__title= t('devise.registrations.new.sign_up')
        = inline_svg_tag 'logo.svg', class: 'fill-primary-600 h-8 w-auto'
      .devise__content
        = form_for(resource, as: resource_name, url: registration_path(resource_name, invite: @account_invitation&.token), html: { class: 'devise__form', 'data-turbo': false }) do |f|
          = render 'errors', resource: resource

          - if @account_invitation
            .form-group
              .flex.items-center.justify-start.mb-4.text-left.space-x-3
                = image_tag url_for_avatar(@account_invitation.account.company), class: "h-10 w-10 rounded-full inline-block mr-1"
                .block= t('.invitation_message', inviter: @account_invitation.invited_by.name, account: @account_invitation.account.name)
              = f.hidden_field :invite, value: @account_invitation.token

          - unless @account_invitation
            = f.fields_for :account, f.object.build_account do |account_f|
              = account_f.fields_for :company, account_f.object.build_company do |company_f|
                .form-group
                  = company_f.label :name, class: 'form-label'
                  = company_f.text_field :name, autofocus: true, class: 'form-control'
          .form-group
            = f.label :first_name, class: 'form-label'
            = f.text_field :first_name, class: 'form-control'
          .form-group
            = f.label :last_name, class: 'form-label'
            = f.text_field :last_name, class: 'form-control'
          .form-group
            = f.label :email, class: 'form-label'
            = f.email_field :email, autocomplete: "email", class: 'form-control'
          .form-group
            .flex.items-center.space-x-4
              = f.label :password, class: 'form-label'
              - if @minimum_password_length
                %em.flex-1.text-sm.text-gray-500
                  = t('devise.passwords.edit.minimum_password_length', value: @minimum_password_length)
            = f.password_field :password, autocomplete: "new-password", class: 'form-control'
          .form-group
            = f.label :password_confirmation, class: 'form-label'
            = f.password_field :password_confirmation, autocomplete: "new-password", class: 'form-control'
          .form-group
            = f.label :time_zone, class: 'form-label'
            = f.time_zone_select :time_zone, nil, { default: browser_time_zone.name }, { class: "form-control" }
          .form-group
            = f.fields_for :account do |account_f|
              = account_f.label :default_currency, class: 'form-label'
              = account_f.select :default_currency, accepted_currencies, {}, class: 'form-control'
          - if I18n.available_locales.length > 1
            .form-group
              = f.label :preferred_language, class: 'form-label'
              = f.select :preferred_language, enum_option_pairs(User, :preferred_language), {}, { class: "form-control" }
          .form-group
            .form-group-checkbox.items-start
              = f.check_box :terms_of_service, id: "tos", class: 'form-control-checkbox'
              %label.form-label-checkbox{for: "tos"}= t ".terms_html", terms: link_to(t(".terms_of_service"), root_path, target: "_blank", class: "text-primary-500"), privacy: link_to(t(".privacy_policy"), root_path, target: "_blank", class: "text-primary-500")
          .form-group
            = invisible_captcha
          .actions
            = f.submit t('.sign_up'), class: "btn btn--primary"
      = render "devise/shared/links"
      = render 'devise/shared/footer'
  .devise__right
    %img.absolute.inset-0.h-full.w-full.object-cover{ src: 'https://salient.tailwindui.com/_next/static/media/background-auth.4bcf3f4b.jpg' }